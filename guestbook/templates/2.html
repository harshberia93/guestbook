<html>
<head>
    <meta charset="utf-8">
    <title>GuestBook</title>
    <style type="text/css">
    body {
        font-family: arial, verdana, sans-serif;
    }
 
    table {
        border-width: 0px;
        border-spacing: 0px;
        padding: 10px;
        border-collapse: collapse;
    }
 
    td {
        max-width: 400px;
	word-wrap:  break-word
    }
 
    .user {
        font-weight: bold;
    }
 
    .colorwhite {
        background-color: #FFFFFF;
    }
 
    .colorgray {
        background-color: #EFEFEF;
    }
    </style>
</head>
<body>
    <h1>GuestBook</h1>

    {% if form.errors %}
        <p style="color: red;">
            Please correct the error{{ form.errors|pluralize }} below.
        </p>
    {% endif %}

    <form action="" method="post" enctype="multipart/form-data">
        <table>
            {{ form.as_table }}
        </table>
        <input type="submit" value="Submit">
    </form>
<table border="1">
  <tr class = "colorgray">
    <th><a href="/{{ ording }}/username/1/">User Name</a></th>
    <th>Image</th>
    <th><a href="/{{ ording }}/email/1/">E-mail</a></th>
    <th><a href="/{{ ording }}/date/1/">Date </a></th>
    <th>Homepage</th>
    <th>Text</th>
    <th>Browser</th>
    <th>IP </th>
  </tr>
{% load thumbnail %}
{% for rows in tbl.object_list %}
<tr  class="{% cycle "colorwhite" "colorgray" %}">
        {% for cols in rows.lst %}
                <td{% if forloop.first %} class="user"{% endif %}>
                {% if forloop.counter == 2 %} 
                   {% if cols %}
                   {% thumbnail cols "120x160" as im %}
                   <img src="{{ im.url }}" width="{{ im.x }}" height="{{ im.y }}">
                {% endthumbnail %}
                    {% else %} {{ cols|wordwrap:20|escape }}
                   {% endif %}
                {% else %}
                {{ cols|wordwrap:20|escape }}</td> {% endif %}
        {% endfor %}
</tr>
{% endfor %}
</table>

<div class="pagination">
    <span class="step-links">
        {% if d.has_previous %}
            <a href="{{ uri }}{{ d.previous_page_number }}/">previous</a>
        {% endif %}

        <span class="current">
            Page {{ d.number }} of {{ d.paginator.num_pages }}.
        </span>

        {% if d.has_next %}
            <a href="{{ uri }}{{ d.next_page_number }}/">next</a>
        {% endif %}
    </span>
</div>
</body>
</html>
